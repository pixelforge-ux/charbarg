<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ú†Ù‡Ø§Ø± Ø¨Ø±Ú¯ Ø§ÛŒØ±Ø§Ù†ÛŒ</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#d4af37">
    <script>
        !function(e,t,n){e.yektanetAnalyticsObject=n,e[n]=e[n]||function(){e[n].q.push(arguments)},e[n].q=e[n].q||[];var a=t.getElementsByTagName("head")[0],r=new Date,c="https://cdn.yektanet.com/superscript/QbmZ9Sgl/native-pixelforge-ux.github.io-44538/yn_pub.js?v="+r.getFullYear().toString()+"0"+r.getMonth()+"0"+r.getDate()+"0"+r.getHours(),s=t.createElement("link");s.rel="preload",s.as="script",s.href=c,a.appendChild(s);var l=t.createElement("script");l.async=!0,l.src=c,a.appendChild(l)}(window,document,"yektanet");
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #1a1a1a;
            color: white;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        #game-canvas {
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-position: center;
            position: relative;
            background-color: transparent !important;
            z-index: 10;
            /* Enhanced vignette for high-end look */
            box-shadow: inset 0 0 200px rgba(0,0,0,0.9), inset 0 0 50px rgba(212, 175, 55, 0.1);
            perspective: 1500px;
        }
        #bg-3d-container {
            position: fixed;
            inset: 0;
            z-index: 0;
            background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
            pointer-events: none;
        }
        .canvas-overlay {
            position: fixed;
            inset: 0;
            pointer-events: none;
            background: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, transparent 50%, rgba(0,0,0,0.4) 100%);
            z-index: 11;
        }
        .card {
            width: 65px;
            height: 90px;
            border-radius: 6px;
            background-size: cover;
            position: absolute;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            /* Remove CSS transition to avoid conflict with GSAP */
        }
        .card:hover {
            transform: translateY(-12px) scale(1.1);
            box-shadow: 0 20px 25px rgba(0,0,0,0.6), 0 0 15px rgba(212, 175, 55, 0.4);
            z-index: 50;
        }
        .card.opponent {
            cursor: default;
            transform: rotate(180deg);
        }
        .card.opponent:hover {
            transform: rotate(180deg);
        }
        .menu-overlay {
            background: radial-gradient(circle at center, rgba(15, 23, 42, 0.7) 0%, rgba(2, 6, 23, 0.95) 100%);
            backdrop-filter: blur(12px) saturate(180%);
            border: 1px solid rgba(212, 175, 55, 0.05);
        }
        #splash-screen {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at center, #2c3e50 0%, #000000 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 200;
            transition: opacity 0.8s ease-out;
        }
        .loader-bar {
            width: 200px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            margin-top: 20px;
            overflow: hidden;
            position: relative;
        }
        .loader-progress {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: #d4af37;
            width: 0%;
            transition: width 0.3s ease;
        }
        .btn-primary {
            background: linear-gradient(135deg, #d4af37 0%, #aa841e 100%);
            color: #1a1a1a;
            font-weight: bold;
            padding: 12px 24px;
            border-radius: 12px;
            transition: all 0.2s;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }
        .btn-primary:active {
            transform: scale(0.95);
        }
        .settings-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: #333;
            border-radius: 5px;
            outline: none;
            accent-color: #d4af37;
        }
        .toggle-btn {
            background: #222;
            border: 1px solid #444;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        .toggle-btn.active {
            background: #d4af37;
            color: #000;
            border-color: #d4af37;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
        }
        .setting-card {
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 4px;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        .setting-card.active {
            border-color: #d4af37;
        }
        .score-badge {
            background: rgba(0,0,0,0.6);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid rgba(212, 175, 55, 0.4);
        }
        .player-name-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.5);
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.75rem;
            color: #d4af37;
            border: 1px solid rgba(212, 175, 55, 0.3);
            pointer-events: none;
            z-index: 30;
            white-space: nowrap;
        }
        .sur-popup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            pointer-events: none;
            z-index: 100;
            opacity: 0;
        }
        #hud {
            width: 100%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s;
            z-index: 70;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            position: absolute;
            top: 0;
            left: 0;
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }
        .turn-indicator {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #d4af37;
            clip-path: polygon(50% 100%, 0% 0%, 100% 0%);
            z-index: 80;
            opacity: 0;
            filter: drop-shadow(0 0 10px #d4af37);
        }
        .hud-top-bar {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: none;
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
        .floating { animation: float 3s ease-in-out infinite; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>
    <div id="splash-screen">
        <img src="logo.png" alt="Logo" class="w-48 mb-6 floating">
        <h1 class="text-4xl font-bold text-yellow-500 mb-2">Ú†Ù‡Ø§Ø± Ø¨Ø±Ú¯ Ø³Ù„Ø·Ù†ØªÛŒ</h1>
        <p class="text-gray-400 text-sm mb-8">Ú©Ø§Ø±ÛŒ Ø§Ø² Ø³ÛŒØ¯ Ø¢Ø±ÙˆÛŒÙ† Ù…ÙˆØ³ÙˆÛŒ</p>
        <div class="loader-bar">
            <div id="loader-progress" class="loader-progress"></div>
        </div>
        <p id="loading-text" class="mt-4 text-xs text-yellow-600/60 uppercase tracking-widest">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ</p>
    </div>

    <div id="bg-3d-container"></div>
    <div id="game-canvas" style="background-image: url('carpet_1.png');">
        <!-- Table Area -->
        <div id="table-cards" class="absolute inset-0 pointer-events-none z-10"></div>
        
        <!-- UI Overlays -->
        <div id="hud">
            <div id="deck-count" class="score-badge">Ø¨Ø§Ù†Ú©: ÛµÛ²</div>
            <div id="scores-container" class="flex flex-1 justify-center gap-2 overflow-x-auto mx-4 no-scrollbar">
                <!-- Scores dynamic -->
            </div>
            <button onclick="pauseGame()" class="pointer-events-auto hover:scale-110 active:scale-95 transition-transform flex items-center justify-center">
                <img src="asset_pause_icon.png" class="w-10 h-10 drop-shadow-lg block" alt="ØªÙˆÙ‚Ù" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                <span class="hidden text-3xl">â¸ï¸</span>
            </button>
        </div>

        <div id="sur-text" class="sur-popup">Ø³ÙˆØ±!</div>

        <!-- Main Menu -->
        <div id="main-menu" class="absolute inset-0 menu-overlay flex flex-col items-center justify-start pt-6 p-4 z-50">
            <img src="logo.png" alt="Logo" class="w-24 mb-2 floating">
            <h1 class="text-2xl font-bold mb-4 text-yellow-500 drop-shadow-[0_0_10px_rgba(212,175,55,0.5)]">Ú†Ù‡Ø§Ø± Ø¨Ø±Ú¯ Ø³Ù„Ø·Ù†ØªÛŒ</h1>
            
            <div class="w-full max-w-[240px] mb-6">
                <label class="block text-center text-xs text-yellow-600/80 mb-1">Ù†Ø§Ù… Ø´Ù…Ø§</label>
                <input type="text" id="user-name-input" maxlength="15" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." 
                       class="w-full bg-black/60 border border-yellow-600/40 rounded-xl p-3 text-center text-md text-yellow-100 placeholder-yellow-900/40 focus:outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500/50 transition-all shadow-xl"
                       oninput="document.getElementById('name-error').classList.add('hidden'); updateUserName(this.value)">
                <p id="name-error" class="text-red-500 text-[10px] mt-1 hidden text-center">Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒ Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</p>
            </div>

            <div class="flex flex-col gap-4 w-full max-w-[280px]">
                <button onclick="showBotSetup()" class="btn-primary text-lg py-4">Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ø±Ø¨Ø§Øª</button>
                <button onclick="showOnlineSetup()" class="btn-primary text-lg py-4">Ø¨Ø§Ø²ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† (Ø¨ØªØ§)</button>
                <button onclick="showSettings()" class="btn-primary opacity-90 text-lg py-4 bg-none bg-gray-900/60 border border-yellow-600/40 text-yellow-500">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
            </div>
        </div>

        <!-- Matchmaking Screen -->
        <div id="matchmaking" class="absolute inset-0 menu-overlay flex flex-col items-center justify-center p-6 z-50 hidden">
            <div class="flex flex-col items-center">
                <div class="w-24 h-24 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin mb-8"></div>
                <h2 class="text-3xl font-bold mb-2">Ø¯Ø±Ø­Ø§Ù„ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†...</h2>
                <p id="matchmaking-status" class="text-gray-400">Ø¬Ø³ØªØ¬ÙˆÛŒ Ø±Ù‚ÛŒØ¨Ø§Ù† Ù…Ù†Ø§Ø³Ø¨...</p>
                <div id="found-players" class="mt-8 flex gap-4">
                    <!-- Found players icons -->
                </div>
            </div>
        </div>

        <!-- Online Setup Menu -->
        <div id="online-setup" class="absolute inset-0 menu-overlay flex flex-col items-center justify-center p-6 z-50 hidden">
            <h2 class="text-2xl font-bold mb-8 text-yellow-500">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</h2>
            <div class="w-full max-w-xs flex flex-col gap-6">
                <div>
                    <label class="block mb-2 text-center">ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†</label>
                    <div class="flex justify-center gap-4">
                        <button onclick="setPlayerCount(2)" id="pc-online-2" class="btn-primary px-8 py-4 text-lg border-2 border-yellow-400">Û² Ù†ÙØ±Ù‡</button>
                        <button onclick="setPlayerCount(3)" id="pc-online-3" class="btn-primary px-8 py-4 text-lg opacity-50">Û³ Ù†ÙØ±Ù‡</button>
                        <button onclick="setPlayerCount(4)" id="pc-online-4" class="btn-primary px-8 py-4 text-lg opacity-50">Û´ Ù†ÙØ±Ù‡</button>
                    </div>
                </div>
                <div class="flex gap-2 mt-4">
                    <button onclick="startMatchmaking()" class="btn-primary flex-1 text-lg py-4">Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¨Ø§Ø²ÛŒ</button>
                    <button onclick="backToMain()" class="bg-gray-700 px-6 py-4 rounded-xl">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
                </div>
            </div>
        </div>

        <!-- Bot Setup Menu -->
        <div id="bot-setup" class="absolute inset-0 menu-overlay flex flex-col items-center justify-center p-6 z-50 hidden">
            <h2 class="text-2xl font-bold mb-8">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ø±Ø¨Ø§Øª</h2>
            <div class="w-full max-w-xs flex flex-col gap-6">
                <div>
                    <label class="block mb-2 text-center">ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†</label>
                    <div class="flex justify-center gap-4">
                        <button onclick="setPlayerCount(2)" id="pc-2" class="btn-primary px-8 py-4 text-lg border-2 border-yellow-400">Û² Ù†ÙØ±Ù‡</button>
                        <button onclick="setPlayerCount(3)" id="pc-3" class="btn-primary px-8 py-4 text-lg opacity-50">Û³ Ù†ÙØ±Ù‡</button>
                        <button onclick="setPlayerCount(4)" id="pc-4" class="btn-primary px-8 py-4 text-lg opacity-50">Û´ Ù†ÙØ±Ù‡</button>
                    </div>
                </div>
                <div>
                    <label class="block mb-2 text-center">Ø³Ø®ØªÛŒ Ø±Ø¨Ø§Øª</label>
                    <select id="bot-difficulty" class="w-full bg-gray-800 p-4 rounded-xl border border-yellow-600 text-lg">
                        <option value="easy">Ø¢Ø³Ø§Ù†</option>
                        <option value="medium" selected>Ù…ØªÙˆØ³Ø·</option>
                        <option value="hard">Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</option>
                    </select>
                </div>
                <div class="flex gap-2">
                    <button onclick="startGame()" class="btn-primary flex-1 text-lg py-4">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
                    <button onclick="backToMain()" class="bg-gray-700 px-6 py-4 rounded-xl">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
                </div>
            </div>
        </div>

        <!-- Pause Menu -->
        <div id="pause-menu" class="absolute inset-0 menu-overlay flex flex-col items-center justify-center p-6 z-[200] hidden">
            <div id="pause-main-content" class="flex flex-col items-center justify-center w-full max-w-xs">
                <h2 class="text-3xl font-bold mb-12 text-yellow-500">Ø¨Ø§Ø²ÛŒ Ù…ØªÙˆÙ‚Ù Ø´Ø¯</h2>
                <div class="flex flex-col gap-4 w-full">
                    <button onclick="resumeGame()" class="btn-primary">Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø§Ø²ÛŒ</button>
                    <button onclick="showExitConfirm()" class="bg-red-800 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-xl transition-all">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø¨Ø§Ø²ÛŒ</button>
                </div>
            </div>
            
            <div id="exit-confirm-content" class="hidden flex flex-col items-center justify-center w-full max-w-xs bg-gray-900 p-8 rounded-3xl border border-red-500">
                <h3 class="text-xl font-bold mb-6 text-center">Ø¢ÛŒØ§ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ</h3>
                <p class="text-gray-400 text-sm mb-8 text-center">Ù¾ÛŒØ´Ø±ÙØª Ø¨Ø§Ø²ÛŒ ÙØ¹Ù„ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ù†Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.</p>
                <div class="flex gap-4 w-full">
                    <button onclick="exitGame()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 flex-1 rounded-xl">Ø¨Ù„Ù‡ØŒ Ø®Ø±ÙˆØ¬</button>
                    <button onclick="hideExitConfirm()" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 flex-1 rounded-xl">Ø§Ù†ØµØ±Ø§Ù</button>
                </div>
            </div>
        </div>

        <!-- Leaderboard -->
        <div id="leaderboard" class="absolute inset-0 menu-overlay flex flex-col items-center justify-center p-6 z-[100] hidden overflow-y-auto">
            <div class="bg-gray-900 border-2 border-yellow-500 rounded-3xl p-8 w-full max-w-lg shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-center text-yellow-500">Ù†ØªØ§ÛŒØ¬ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§Ø²ÛŒ</h2>
                
                <div id="leaderboard-content" class="space-y-4 mb-8">
                    <!-- Table results will go here -->
                </div>

                <button onclick="location.reload()" class="btn-primary w-full text-lg py-4">Ø¨Ø§Ø²ÛŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡</button>
            </div>
        </div>

        <!-- Settings Menu -->
        <div id="settings-menu" class="absolute inset-0 menu-overlay flex flex-col items-center justify-start p-6 z-50 hidden overflow-y-auto">
            <h2 class="text-2xl font-bold my-8 text-yellow-500">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡</h2>
            
            <div class="w-full max-w-md flex flex-col gap-8 pb-12">
                <!-- Target Score (Horizontal Scroll Style) -->
                <div>
                    <label class="block text-center mb-4 text-gray-300">Ø§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ: <span id="target-score-val" class="text-yellow-500 font-bold">Û¶Û²</span></label>
                    <div class="flex items-center gap-4">
                        <span class="text-xs text-gray-500">ÛµÛ¸</span>
                        <input type="range" id="target-score-input" min="58" max="68" step="1" value="62" 
                               class="settings-slider" oninput="updateTargetScore(this.value)">
                        <span class="text-xs text-gray-500">Û¶Û¸</span>
                    </div>
                </div>

                <!-- Game Speed -->
                <div>
                    <label class="block text-center mb-4 text-gray-300">Ø³Ø±Ø¹Øª Ø¨Ø§Ø²ÛŒ: <span id="game-speed-val" class="text-yellow-500 font-bold">Ù…ØªÙˆØ³Ø·</span></label>
                    <input type="range" id="game-speed-input" min="1" max="3" step="1" value="2" 
                           class="settings-slider" oninput="updateGameSpeed(this.value)">
                </div>

                <!-- Rule Toggles -->
                <div class="space-y-4">
                    <p class="text-center text-sm text-gray-400 mb-2">Ù‚ÙˆØ§Ù†ÛŒÙ† Ø®Ø§Øµ</p>
                    <div class="flex justify-between items-center bg-white/5 p-3 rounded-xl border border-white/10">
                        <span class="text-sm">Ø³ÙˆØ± Ø¨Ø§ Ø³Ø±Ø¨Ø§Ø²</span>
                        <button onclick="toggleRule('allowJackSur')" id="rule-allowJackSur" class="toggle-btn">ØºÛŒØ±ÙØ¹Ø§Ù„</button>
                    </div>
                    <div class="flex justify-between items-center bg-white/5 p-3 rounded-xl border border-white/10">
                        <span class="text-sm">Ø³ÙˆØ± Ø¯Ø± Ø¨Ø±Ú¯ Ø¢Ø®Ø±</span>
                        <button onclick="toggleRule('allowLastCardSur')" id="rule-allowLastCardSur" class="toggle-btn">ØºÛŒØ±ÙØ¹Ø§Ù„</button>
                    </div>
                    <div class="flex justify-between items-center bg-white/5 p-3 rounded-xl border border-white/10">
                        <span class="text-sm">Ø­Ø°Ù Ø³ÙˆØ± Ø­Ø±ÛŒÙ</span>
                        <button onclick="toggleRule('cancelOpponentSur')" id="rule-cancelOpponentSur" class="toggle-btn">ØºÛŒØ±ÙØ¹Ø§Ù„</button>
                    </div>
                </div>

                <div>
                    <p class="mb-4 text-center">Ø·Ø±Ø­ Ù¾Ø´Øª Ú©Ø§Ø±Øª</p>
                    <div class="grid grid-cols-3 gap-4">
                        <div onclick="setCardBack(1)" id="cb-1" class="setting-card active">
                            <img src="card_back_1.png" class="w-full rounded-lg">
                        </div>
                        <div onclick="setCardBack(2)" id="cb-2" class="setting-card">
                            <img src="card_back_2.png" class="w-full rounded-lg">
                        </div>
                        <div onclick="setCardBack(3)" id="cb-3" class="setting-card">
                            <img src="card_back_3.png" class="w-full rounded-lg">
                        </div>
                    </div>
                </div>

                <div>
                    <p class="mb-4 text-center">Ø·Ø±Ø­ ÙØ±Ø´ (Ø²Ù…ÛŒÙ†Ù‡)</p>
                    <div class="grid grid-cols-3 gap-4">
                        <div onclick="setCarpet(1)" id="cp-1" class="setting-card active">
                            <img src="carpet_1.png" class="w-full h-20 object-cover rounded-lg">
                        </div>
                        <div onclick="setCarpet(2)" id="cp-2" class="setting-card">
                            <img src="carpet_2.png" class="w-full h-20 object-cover rounded-lg">
                        </div>
                        <div onclick="setCarpet(3)" id="cp-3" class="setting-card">
                            <img src="carpet_3.png" class="w-full h-20 object-cover rounded-lg">
                        </div>
                    </div>
                </div>

                <button onclick="backToMain()" class="btn-primary w-full">Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¨Ø§Ø²Ú¯Ø´Øª</button>
            </div>
        </div>

        <!-- Sticker Panel -->
        <div id="sticker-panel" class="absolute bottom-32 right-4 grid grid-cols-4 gap-2 z-[300] opacity-0 pointer-events-none transition-all scale-90 origin-bottom-right bg-black/40 backdrop-blur-xl p-3 rounded-3xl border border-white/10 shadow-2xl max-h-[60vh] overflow-y-auto no-scrollbar">
            <button onclick="sendSticker('ğŸ˜Š')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ˜Š</button>
            <button onclick="sendSticker('ğŸ˜‚')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ˜‚</button>
            <button onclick="sendSticker('ğŸ˜ ')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ˜ </button>
            <button onclick="sendSticker('ğŸ˜®')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ˜®</button>
            <button onclick="sendSticker('ğŸ˜')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ˜</button>
            <button onclick="sendSticker('ğŸ¤”')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ¤”</button>
            <button onclick="sendSticker('ğŸ¥³')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ¥³</button>
            <button onclick="sendSticker('ğŸ˜±')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ˜±</button>
            <button onclick="sendSticker('ğŸ˜´')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ˜´</button>
            <button onclick="sendSticker('ğŸ’©')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ’©</button>
            <button onclick="sendSticker('ğŸ‘')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ‘</button>
            <button onclick="sendSticker('ğŸ‘')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ‘</button>
            <button onclick="sendSticker('ğŸ”¥')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ”¥</button>
            <button onclick="sendSticker('â¤ï¸')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">â¤ï¸</button>
            <button onclick="sendSticker('ğŸ‘')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ‘</button>
            <button onclick="sendSticker('ğŸ™')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ™</button>
            <button onclick="sendSticker('ğŸƒ')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸƒ</button>
            <button onclick="sendSticker('ğŸ‘‘')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ‘‘</button>
            <button onclick="sendSticker('ğŸ’¸')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ’¸</button>
            <button onclick="sendSticker('ğŸ¤«')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ¤«</button>
            <button onclick="sendSticker('ğŸ« ')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ« </button>
            <button onclick="sendSticker('ğŸ¤ª')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ¤ª</button>
            <button onclick="sendSticker('ğŸ¤®')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ¤®</button>
            <button onclick="sendSticker('ğŸ¤¯')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ¤¯</button>
            <button onclick="sendSticker('ğŸ¤¬')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ¤¬</button>
            <button onclick="sendSticker('ğŸ¤¡')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ¤¡</button>
            <button onclick="sendSticker('ğŸ‘½')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ‘½</button>
            <button onclick="sendSticker('ğŸ‘¾')" class="bg-white/5 hover:bg-white/20 p-2 rounded-xl text-2xl transition-transform active:scale-90">ğŸ‘¾</button>
        </div>
        <button id="sticker-toggle" onclick="toggleStickerPanel()" class="absolute bottom-32 left-4 bg-yellow-600/40 p-3 rounded-full z-[300] pointer-events-none opacity-0 transition-opacity shadow-lg shadow-yellow-900/50">
            <svg viewBox="0 0 24 24" class="w-8 h-8 fill-yellow-500" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12zM7 9h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z"/>
            </svg>
        </button>

        <!-- Hands Areas -->
        <div id="player-hand" class="absolute bottom-16 left-0 right-0 h-32 pointer-events-none z-20"></div>
        <div id="opponent-hand-top" class="absolute top-8 left-0 right-0 h-24 pointer-events-none z-20"></div>
        <div id="opponent-hand-left" class="absolute left-6 top-0 bottom-0 w-24 pointer-events-none z-20"></div>
        <div id="opponent-hand-right" class="absolute right-6 top-0 bottom-0 w-24 pointer-events-none z-20"></div>

        <!-- Name Labels -->
        <div id="name-label-0" class="player-name-label" style="bottom: 120px; left: 50%; transform: translateX(-50%);"></div>
        <div id="name-label-1" class="player-name-label" style="top: 120px; left: 50%; transform: translateX(-50%);"></div>
        <div id="name-label-2" class="player-name-label" style="top: 50%; left: 100px; transform: translateY(-50%) rotate(90deg);"></div>
        <div id="name-label-3" class="player-name-label" style="top: 50%; right: 100px; transform: translateY(-50%) rotate(-90deg);"></div>

        <!-- Turn Indicator Pointer -->
        <div id="turn-ptr" class="turn-indicator"></div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "gsap": "https://esm.sh/gsap",
            "three": "https://esm.sh/three"
        }
    }
    </script>
    <script type="module" src="game.js"></script>
</body>
</html>